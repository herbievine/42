/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   parse.c                                            :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: herbie <herbie@student.42.fr>              +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2023/05/05 09:54:31 by herbie            #+#    #+#             */
/*   Updated: 2023/05/15 11:03:25 by herbie           ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include "parse.h"
#include "io.h"
#include "str.h"
#include "structs.h"
#include "free.h"
#include "split.h"
#include "error.h"
#include <fcntl.h>
#include <stdio.h>
#include <stdlib.h>

#define mapWidth 24
#define mapHeight 24

int worldMap[mapWidth][mapHeight]=
{
  {4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,7,7,7,7,7,7,7,7},
  {4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,0,0,0,0,0,0,7},
  {4,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7},
  {4,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7},
  {4,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,7,0,0,0,0,0,0,7},
  {4,0,4,0,0,0,0,5,5,5,5,5,5,5,5,5,7,7,0,7,7,7,7,7},
  {4,0,5,0,0,0,0,5,0,5,0,5,0,5,0,5,7,0,0,0,7,7,7,1},
  {4,0,6,0,0,0,0,5,0,0,0,0,0,0,0,5,7,0,0,0,0,0,0,8},
  {4,0,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,7,7,1},
  {4,0,8,0,0,0,0,5,0,0,0,0,0,0,0,5,7,0,0,0,0,0,0,8},
  {4,0,0,0,0,0,0,5,0,0,0,0,0,0,0,5,7,0,0,0,7,7,7,1},
  {4,0,0,0,0,0,0,5,5,5,5,0,5,5,5,5,7,7,7,7,7,7,7,1},
  {6,6,6,6,6,6,6,6,6,6,6,0,6,6,6,6,6,6,6,6,6,6,6,6},
  {8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4},
  {6,6,6,6,6,6,0,6,6,6,6,0,6,6,6,6,6,6,6,6,6,6,6,6},
  {4,4,4,4,4,4,0,4,4,4,6,0,6,2,2,2,2,2,2,2,3,3,3,3},
  {4,0,0,0,0,0,0,0,0,4,6,0,6,2,0,0,0,0,0,2,0,0,0,2},
  {4,0,0,0,0,0,0,0,0,0,0,0,6,2,0,0,5,0,0,2,0,0,0,2},
  {4,0,0,0,0,0,0,0,0,4,6,0,6,2,0,0,0,0,0,2,2,0,2,2},
  {4,0,6,0,6,0,0,0,0,4,6,0,0,0,0,0,5,0,0,0,0,0,0,2},
  {4,0,0,5,0,0,0,0,0,4,6,0,6,2,0,0,0,0,0,2,2,0,2,2},
  {4,0,6,0,6,0,0,0,0,4,6,0,6,2,0,0,5,0,0,2,0,0,0,2},
  {4,0,0,0,0,0,0,0,0,4,6,0,6,2,0,0,0,0,0,2,0,0,0,2},
  {4,4,4,4,4,4,4,4,4,4,1,1,1,2,2,2,2,2,2,3,3,3,3,3}
};

void	ft_init_map(t_data *data)
{
	// allocate memory for map int**map2
	data->map2 = malloc(mapHeight * sizeof(int*));
	for (int i = 0; i < mapHeight; i++)
	{
		(data->map2)[i] = malloc(mapWidth * sizeof(int));
	}

	// fill map
	int x = 0, y= 0;
	while (x < mapWidth)
	{
		y = 0;
		while (y < mapHeight)
		{
			data->map2[x][y] = worldMap[x][y];
			y++;
		}
		x++;
	}

}

void	ft_print_map(t_data data)
{
	int x = 0, y = 0;
	printf("MAP:\n\n");
	while (x < mapWidth)
	{
		y = 0;
		while (y < mapHeight)
		{
			printf("%d", data.map2[x][y]);
			y++;
		}
		printf("\n");
		x++;
	}
}

/**
 * @brief The ft_parse_map_or_throw function parses the map. It gathers 
 * information about the map, checks if the map is valid, and if so, returns
 * the map. Otherwise, it frees the data and exits with an error.
 * 
 * @param data 
 * @param map_path 
 */
// void	ft_parse_map_or_throw(int ***map, char *map_path)
// {
// 	(void)map_path;
// 	// test map

// 	// allocate memory for map int**map2
// 	data->map = malloc(mapHeight * sizeof(int*));
// 	for (int i = 0; i < mapHeight; i++)
// 	{
// 		(data->map)[i] = malloc(mapWidth * sizeof(int));
// 	}

// 	// fill map
// 	int x = 0, y= 0;
// 	while (x < mapWidth)
// 	{
// 		y = 0;
// 		while (y < mapHeight)
// 		{
// 			map[x][y] = worldMap[x][y];
// 			y++;
// 		}
// 		x++;
// 	}
// }
